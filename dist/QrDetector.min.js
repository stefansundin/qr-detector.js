(()=>{"use strict";var o={122:(o,e,r)=>{r.r(e),r.d(e,{default:()=>T});class t{constructor(o,e){this.width=e,this.height=o.length/e,this.data=o}static createEmpty(o,e){return new t(new Uint8ClampedArray(o*e),o)}get(o,e){return!(o<0||o>=this.width||e<0||e>=this.height||!this.data[e*this.width+o])}set(o,e,r){this.data[e*this.width+o]=r?1:0}setRegion(o,e,r,t,s){for(let c=e;c<e+t;c++)for(let e=o;e<o+r;e++)this.set(e,c,!!s)}}function s(o,e,r){return o<e?e:o>r?r:o}class c{constructor(o,e,r){this.width=o;const t=o*e;if(r&&r.length!==t)throw new Error("Wrong buffer size");this.data=r||new Uint8ClampedArray(t)}get(o,e){return this.data[e*this.width+o]}set(o,e,r){this.data[e*this.width+o]=r}}class n{constructor(o){this.byteOffset=0,this.bitOffset=0,this.bytes=o}readBits(o){if(o<1||o>32||o>this.available())throw new Error("Cannot read "+o.toString()+" bits");let e=0;if(this.bitOffset>0){const r=8-this.bitOffset,t=o<r?o:r,s=r-t,c=255>>8-t<<s;e=(this.bytes[this.byteOffset]&c)>>s,o-=t,this.bitOffset+=t,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(o>0){for(;o>=8;)e=e<<8|255&this.bytes[this.byteOffset],this.byteOffset++,o-=8;if(o>0){const r=8-o,t=255>>r<<r;e=e<<o|(this.bytes[this.byteOffset]&t)>>r,this.bitOffset+=o}}return e}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var d,l;function a(o,e){const r=[];let t="";const s=[10,12,14][e];let c=o.readBits(s);for(;c>=3;){const e=o.readBits(10);if(e>=1e3)throw new Error("Invalid numeric value above 999");const s=Math.floor(e/100),n=Math.floor(e/10)%10,d=e%10;r.push(48+s,48+n,48+d),t+=s.toString()+n.toString()+d.toString(),c-=3}if(2===c){const e=o.readBits(7);if(e>=100)throw new Error("Invalid numeric value above 99");const s=Math.floor(e/10),c=e%10;r.push(48+s,48+c),t+=s.toString()+c.toString()}else if(1===c){const e=o.readBits(4);if(e>=10)throw new Error("Invalid numeric value above 9");r.push(48+e),t+=e.toString()}return{bytes:r,text:t}}!function(o){o.Numeric="numeric",o.Alphanumeric="alphanumeric",o.Byte="byte",o.Kanji="kanji",o.ECI="eci",o.StructuredAppend="structuredappend"}(d||(d={})),function(o){o[o.Terminator=0]="Terminator",o[o.Numeric=1]="Numeric",o[o.Alphanumeric=2]="Alphanumeric",o[o.Byte=4]="Byte",o[o.Kanji=8]="Kanji",o[o.ECI=7]="ECI",o[o.StructuredAppend=3]="StructuredAppend"}(l||(l={}));const i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function B(o,e){const r=[];let t="";const s=[9,11,13][e];let c=o.readBits(s);for(;c>=2;){const e=o.readBits(11),s=Math.floor(e/45),n=e%45;r.push(i[s].charCodeAt(0),i[n].charCodeAt(0)),t+=i[s]+i[n],c-=2}if(1===c){const e=o.readBits(6);r.push(i[e].charCodeAt(0)),t+=i[e]}return{bytes:r,text:t}}function k(o,e){const r=[];let t="";const s=[8,16,16][e],c=o.readBits(s);for(let e=0;e<c;e++){const e=o.readBits(8);r.push(e)}try{t+=decodeURIComponent(r.map((o=>`%${("0"+o.toString(16)).substr(-2)}`)).join(""))}catch(o){}return{bytes:r,text:t}}function u(o,e){const r=[],t=[8,10,12][e],s=o.readBits(t);for(let e=0;e<s;e++){const e=o.readBits(13);let t=Math.floor(e/192)<<8|e%192;t+=t<7936?33088:49472,r.push(t>>8,255&t)}return{bytes:r,text:new TextDecoder("shift-jis").decode(Uint8Array.from(r))}}class m{constructor(o,e){if(0===e.length)throw new Error("No coefficients.");this.field=o;const r=e.length;if(r>1&&0===e[0]){let t=1;for(;t<r&&0===e[t];)t++;if(t===r)this.coefficients=o.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(r-t);for(let o=0;o<this.coefficients.length;o++)this.coefficients[o]=e[t+o]}}else this.coefficients=e}degree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}addOrSubtract(o){if(this.isZero())return o;if(o.isZero())return this;let e=this.coefficients,r=o.coefficients;e.length>r.length&&([e,r]=[r,e]);const t=new Uint8ClampedArray(r.length),s=r.length-e.length;for(let o=0;o<s;o++)t[o]=r[o];for(let o=s;o<r.length;o++)t[o]=C(e[o-s],r[o]);return new m(this.field,t)}multiply(o){if(0===o)return this.field.zero;if(1===o)return this;const e=this.coefficients.length,r=new Uint8ClampedArray(e);for(let t=0;t<e;t++)r[t]=this.field.multiply(this.coefficients[t],o);return new m(this.field,r)}multiplyPoly(o){if(this.isZero()||o.isZero())return this.field.zero;const e=this.coefficients,r=e.length,t=o.coefficients,s=t.length,c=new Uint8ClampedArray(r+s-1);for(let o=0;o<r;o++){const r=e[o];for(let e=0;e<s;e++)c[o+e]=C(c[o+e],this.field.multiply(r,t[e]))}return new m(this.field,c)}multiplyByMonomial(o,e){if(o<0)throw new Error("Invalid degree less than 0");if(0===e)return this.field.zero;const r=this.coefficients.length,t=new Uint8ClampedArray(r+o);for(let o=0;o<r;o++)t[o]=this.field.multiply(this.coefficients[o],e);return new m(this.field,t)}evaluateAt(o){let e=0;if(0===o)return this.getCoefficient(0);const r=this.coefficients.length;if(1===o)return this.coefficients.forEach((o=>{e=C(e,o)})),e;e=this.coefficients[0];for(let t=1;t<r;t++)e=C(this.field.multiply(o,e),this.coefficients[t]);return e}}function C(o,e){return o^e}class w{constructor(o,e,r){this.primitive=o,this.size=e,this.generatorBase=r,this.expTable=new Array(this.size),this.logTable=new Array(this.size);let t=1;for(let o=0;o<this.size;o++)this.expTable[o]=t,t*=2,t>=this.size&&(t=(t^this.primitive)&this.size-1);for(let o=0;o<this.size-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new m(this,Uint8ClampedArray.from([0])),this.one=new m(this,Uint8ClampedArray.from([1]))}multiply(o,e){return 0===o||0===e?0:this.expTable[(this.logTable[o]+this.logTable[e])%(this.size-1)]}inverse(o){if(0===o)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[o]-1]}buildMonomial(o,e){if(o<0)throw new Error("Invalid monomial degree less than 0");if(0===e)return this.zero;const r=new Uint8ClampedArray(o+1);return r[0]=e,new m(this,r)}log(o){if(0===o)throw new Error("Can't take log(0)");return this.logTable[o]}exp(o){return this.expTable[o]}}function f(o,e){const r=new Uint8ClampedArray(o.length);r.set(o);const t=new w(285,256,0),s=new m(t,r),c=new Uint8ClampedArray(e);let n=!1;for(let o=0;o<e;o++){const e=s.evaluateAt(t.exp(o+t.generatorBase));c[c.length-1-o]=e,0!==e&&(n=!0)}if(!n)return r;const d=new m(t,c),l=function(o,e,r,t){e.degree()<r.degree()&&([e,r]=[r,e]);let s=e,c=r,n=o.zero,d=o.one;for(;c.degree()>=t/2;){const e=s,r=n;if(s=c,n=d,s.isZero())return null;c=e;let t=o.zero;const l=s.getCoefficient(s.degree()),a=o.inverse(l);for(;c.degree()>=s.degree()&&!c.isZero();){const e=c.degree()-s.degree(),r=o.multiply(c.getCoefficient(c.degree()),a);t=t.addOrSubtract(o.buildMonomial(e,r)),c=c.addOrSubtract(s.multiplyByMonomial(e,r))}if(d=t.multiplyPoly(n).addOrSubtract(r),c.degree()>=s.degree())return null}const l=d.getCoefficient(0);if(0===l)return null;const a=o.inverse(l);return[d.multiply(a),c.multiply(a)]}(t,t.buildMonomial(e,1),d,e);if(null===l)return null;const a=function(o,e){const r=e.degree();if(1===r)return[e.getCoefficient(1)];const t=new Array(r);let s=0;for(let c=1;c<o.size&&s<r;c++)0===e.evaluateAt(c)&&(t[s]=o.inverse(c),s++);return s!==r?null:t}(t,l[0]);if(null==a)return null;const i=function(o,e,r){const t=r.length,s=new Array(t);for(let c=0;c<t;c++){const n=o.inverse(r[c]);let d=1;for(let e=0;e<t;e++)c!==e&&(d=o.multiply(d,C(1,o.multiply(r[e],n))));s[c]=o.multiply(e.evaluateAt(n),o.inverse(d)),0!==o.generatorBase&&(s[c]=o.multiply(s[c],n))}return s}(t,l[1],a);for(let o=0;o<a.length;o++){const e=r.length-1-t.log(a[o]);if(e<0)return null;r[e]=C(r[e],i[o])}return r}const P=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}];function h(o,e){let r=o^e,t=0;for(;r;)t++,r&=r-1;return t}function g(o,e){return e<<1|o}const b=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],y=[o=>(o.y+o.x)%2==0,o=>o.y%2==0,o=>o.x%3==0,o=>(o.y+o.x)%3==0,o=>(Math.floor(o.y/2)+Math.floor(o.x/3))%2==0,o=>o.x*o.y%2+o.x*o.y%3==0,o=>(o.y*o.x%2+o.y*o.x%3)%2==0,o=>((o.y+o.x)%2+o.y*o.x%3)%2==0];function p(o){const e=function(o){const e=o.height,r=Math.floor((e-17)/4);if(r<=6)return P[r-1];let t=0;for(let r=5;r>=0;r--)for(let s=e-9;s>=e-11;s--)t=g(o.get(s,r),t);let s=0;for(let r=5;r>=0;r--)for(let t=e-9;t>=e-11;t--)s=g(o.get(r,t),s);let c,n=1/0;for(const o of P){if(o.infoBits===t||o.infoBits===s)return o;let e=h(t,o.infoBits);e<n&&(c=o,n=e),e=h(s,o.infoBits),e<n&&(c=o,n=e)}return n<=3?c:void 0}(o);if(!e)return null;const r=function(o){let e=0;for(let r=0;r<=8;r++)6!==r&&(e=g(o.get(r,8),e));for(let r=7;r>=0;r--)6!==r&&(e=g(o.get(8,r),e));const r=o.height;let t=0;for(let e=r-1;e>=r-7;e--)t=g(o.get(8,e),t);for(let e=r-8;e<r;e++)t=g(o.get(e,8),t);let s=1/0,c=null;for(const{bits:o,formatInfo:r}of b){if(o===e||o===t)return r;let n=h(e,o);n<s&&(c=r,s=n),e!==t&&(n=h(t,o),n<s&&(c=r,s=n))}return s<=3?c:null}(o);if(!r)return null;const s=function(o,e,r){const t=e.errorCorrectionLevels[r],s=[];let c=0;if(t.ecBlocks.forEach((o=>{for(let e=0;e<o.numBlocks;e++)s.push({numDataCodewords:o.dataCodewordsPerBlock,codewords:[]}),c+=o.dataCodewordsPerBlock+t.ecCodewordsPerBlock})),o.length<c)return null;o=o.slice(0,c);const n=t.ecBlocks[0].dataCodewordsPerBlock;for(let e=0;e<n;e++)for(const e of s)e.codewords.push(o.shift());if(t.ecBlocks.length>1){const e=t.ecBlocks[0].numBlocks,r=t.ecBlocks[1].numBlocks;for(let t=0;t<r;t++)s[e+t].codewords.push(o.shift())}for(;o.length>0;)for(const e of s)e.codewords.push(o.shift());return s}(function(o,e,r){const s=y[r.dataMask],c=o.height,n=function(o){const e=17+4*o.versionNumber,r=t.createEmpty(e,e);r.setRegion(0,0,9,9,!0),r.setRegion(e-8,0,8,9,!0),r.setRegion(0,e-8,9,8,!0);for(const t of o.alignmentPatternCenters)for(const s of o.alignmentPatternCenters)6===t&&6===s||6===t&&s===e-7||t===e-7&&6===s||r.setRegion(t-2,s-2,5,5,!0);return r.setRegion(6,9,1,e-17,!0),r.setRegion(9,6,e-17,1,!0),o.versionNumber>6&&(r.setRegion(e-11,0,3,6,!0),r.setRegion(0,e-11,6,3,!0)),r}(e),d=[];let l=0,a=0,i=!0;for(let e=c-1;e>0;e-=2){6===e&&e--;for(let r=0;r<c;r++){const t=i?c-1-r:r;for(let r=0;r<2;r++){const c=e-r;if(!n.get(c,t)){a++;let e=o.get(c,t);s({y:t,x:c})&&(e=!e),l=g(e,l),8===a&&(d.push(l),a=0,l=0)}}}i=!i}return d}(o,e,r),e,r.errorCorrectionLevel);if(!s)return null;const c=s.reduce(((o,e)=>o+e.numDataCodewords),0),i=new Uint8ClampedArray(c);let m=0;for(const o of s){const e=f(o.codewords,o.codewords.length-o.numDataCodewords);if(!e)return null;for(let r=0;r<o.numDataCodewords;r++)i[m++]=e[r]}try{return function(o,e){const r=new n(o),t=e<=9?0:e<=26?1:2,s={text:"",bytes:[],chunks:[],version:e};for(;r.available()>=4;){const o=r.readBits(4);if(o===l.Terminator)return s;if(o===l.ECI)0===r.readBits(1)?s.chunks.push({type:d.ECI,assignmentNumber:r.readBits(7)}):0===r.readBits(1)?s.chunks.push({type:d.ECI,assignmentNumber:r.readBits(14)}):0===r.readBits(1)?s.chunks.push({type:d.ECI,assignmentNumber:r.readBits(21)}):s.chunks.push({type:d.ECI,assignmentNumber:-1});else if(o===l.Numeric){const o=a(r,t);s.text+=o.text,s.bytes.push(...o.bytes),s.chunks.push({type:d.Numeric,text:o.text})}else if(o===l.Alphanumeric){const o=B(r,t);s.text+=o.text,s.bytes.push(...o.bytes),s.chunks.push({type:d.Alphanumeric,text:o.text})}else if(o===l.Byte){const o=k(r,t);s.text+=o.text,s.bytes.push(...o.bytes),s.chunks.push({type:d.Byte,bytes:o.bytes,text:o.text})}else if(o===l.Kanji){const o=u(r,t);s.text+=o.text,s.bytes.push(...o.bytes),s.chunks.push({type:d.Kanji,bytes:o.bytes,text:o.text})}else o===l.StructuredAppend&&s.chunks.push({type:d.StructuredAppend,currentSequence:r.readBits(4),totalSequence:r.readBits(4),parity:r.readBits(8)})}if(0===r.available()||0===r.readBits(r.available()))return s}(i,e.versionNumber)}catch(o){return null}}function v(o){if(null==o)return null;const e=p(o);if(e)return e;for(let e=0;e<o.width;e++)for(let r=e+1;r<o.height;r++)o.get(e,r)!==o.get(r,e)&&(o.set(e,r,!o.get(e,r)),o.set(r,e,!o.get(r,e)));return p(o)}function x(o,e,r,t){const s=o.x-e.x+r.x-t.x,c=o.y-e.y+r.y-t.y;if(0===s&&0===c)return{a11:e.x-o.x,a12:e.y-o.y,a13:0,a21:r.x-e.x,a22:r.y-e.y,a23:0,a31:o.x,a32:o.y,a33:1};{const n=e.x-r.x,d=t.x-r.x,l=e.y-r.y,a=t.y-r.y,i=n*a-d*l,B=(s*a-d*c)/i,k=(n*c-s*l)/i;return{a11:e.x-o.x+B*e.x,a12:e.y-o.y+B*e.y,a13:B,a21:t.x-o.x+k*t.x,a22:t.y-o.y+k*t.y,a23:k,a31:o.x,a32:o.y,a33:1}}}function M(o,e){const r=function(o,e,r,t){const s=x({x:3.5,y:3.5},e,r,t);return{a11:s.a22*s.a33-s.a23*s.a32,a12:s.a13*s.a32-s.a12*s.a33,a13:s.a12*s.a23-s.a13*s.a22,a21:s.a23*s.a31-s.a21*s.a33,a22:s.a11*s.a33-s.a13*s.a31,a23:s.a13*s.a21-s.a11*s.a23,a31:s.a21*s.a32-s.a22*s.a31,a32:s.a12*s.a31-s.a11*s.a32,a33:s.a11*s.a22-s.a12*s.a21}}(0,{x:e.dimension-3.5,y:3.5},{x:e.dimension-6.5,y:e.dimension-6.5},{x:3.5,y:e.dimension-3.5}),s=(n=r,{a11:(c=x(e.topLeft,e.topRight,e.alignmentPattern,e.bottomLeft)).a11*n.a11+c.a21*n.a12+c.a31*n.a13,a12:c.a12*n.a11+c.a22*n.a12+c.a32*n.a13,a13:c.a13*n.a11+c.a23*n.a12+c.a33*n.a13,a21:c.a11*n.a21+c.a21*n.a22+c.a31*n.a23,a22:c.a12*n.a21+c.a22*n.a22+c.a32*n.a23,a23:c.a13*n.a21+c.a23*n.a22+c.a33*n.a23,a31:c.a11*n.a31+c.a21*n.a32+c.a31*n.a33,a32:c.a12*n.a31+c.a22*n.a32+c.a32*n.a33,a33:c.a13*n.a31+c.a23*n.a32+c.a33*n.a33});var c,n;const d=t.createEmpty(e.dimension,e.dimension),l=(o,e)=>{const r=s.a13*o+s.a23*e+s.a33;return{x:(s.a11*o+s.a21*e+s.a31)/r,y:(s.a12*o+s.a22*e+s.a32)/r}};for(let r=0;r<e.dimension;r++)for(let t=0;t<e.dimension;t++){const e=l(t+.5,r+.5);d.set(t,r,o.get(Math.floor(e.x),Math.floor(e.y)))}return{matrix:d,mappingFunction:l}}const L=(o,e)=>Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2));function I(o){return o.reduce(((o,e)=>o+e))}function N(o,e,r,t){const s=[{x:Math.floor(o.x),y:Math.floor(o.y)}],c=Math.abs(e.y-o.y)>Math.abs(e.x-o.x);let n,d,l,a;c?(n=Math.floor(o.y),d=Math.floor(o.x),l=Math.floor(e.y),a=Math.floor(e.x)):(n=Math.floor(o.x),d=Math.floor(o.y),l=Math.floor(e.x),a=Math.floor(e.y));const i=Math.abs(l-n),B=Math.abs(a-d);let k=Math.floor(-i/2);const u=n<l?1:-1,m=d<a?1:-1;let C=!0;for(let o=n,e=d;o!==l+u;o+=u){const n=c?e:o,d=c?o:e;if(r.get(n,d)!==C&&(C=!C,s.push({x:n,y:d}),s.length===t+1))break;if(k+=B,k>0){if(e===a)break;e+=m,k-=i}}const w=[];for(let o=0;o<t;o++)s[o]&&s[o+1]?w.push(L(s[o],s[o+1])):w.push(0);return w}function A(o,e,r,t){const s=e.y-o.y,c=e.x-o.x,n=N(o,e,r,Math.ceil(t/2)),d=N(o,{x:o.x-c,y:o.y-s},r,Math.ceil(t/2)),l=n.shift()+d.shift()-1;return d.concat(l).concat(...n)}function S(o,e){const r=I(o)/I(e);let t=0;return e.forEach(((e,s)=>{t+=Math.pow(o[s]-e*r,2)})),{averageSize:r,error:t}}function z(o,e,r){try{const t=A(o,{x:-1,y:o.y},r,e.length),s=A(o,{x:o.x,y:-1},r,e.length),c=A(o,{x:Math.max(0,o.x-o.y)-1,y:Math.max(0,o.y-o.x)-1},r,e.length),n=A(o,{x:Math.min(r.width,o.x+o.y)+1,y:Math.min(r.height,o.y+o.x)+1},r,e.length),d=S(t,e),l=S(s,e),a=S(c,e),i=S(n,e),B=Math.sqrt(d.error*d.error+l.error*l.error+a.error*a.error+i.error*i.error),k=(d.averageSize+l.averageSize+a.averageSize+i.averageSize)/4;return B+(Math.pow(d.averageSize-k,2)+Math.pow(l.averageSize-k,2)+Math.pow(a.averageSize-k,2)+Math.pow(i.averageSize-k,2))/k}catch(o){return 1/0}}function R(o,e){let r=Math.round(e.x);for(;o.get(r,Math.round(e.y));)r--;let t=Math.round(e.x);for(;o.get(t,Math.round(e.y));)t++;const s=(r+t)/2;let c=Math.round(e.y);for(;o.get(Math.round(s),c);)c--;let n=Math.round(e.y);for(;o.get(Math.round(s),n);)n++;return{x:s,y:(c+n)/2}}function X(o,e,r,t,s){let c,n;try{({dimension:c,moduleSize:n}=function(o,e,r,t){const s=(I(A(o,r,t,5))/7+I(A(o,e,t,5))/7+I(A(r,o,t,5))/7+I(A(e,o,t,5))/7)/4;if(s<1)throw new Error("Invalid module size");const c=Math.round(L(o,e)/s),n=Math.round(L(o,r)/s);let d=Math.floor((c+n)/2)+7;switch(d%4){case 0:d++;break;case 2:d--}return{dimension:d,moduleSize:s}}(t,r,s,o))}catch(o){return null}const d=r.x-t.x+s.x,l=r.y-t.y+s.y,a=(L(t,s)+L(t,r))/2/n,i=1-3/a,B={x:t.x+i*(d-t.x),y:t.y+i*(l-t.y)},k=e.map((e=>{const r=(e.top.startX+e.top.endX+e.bottom.startX+e.bottom.endX)/4,t=(e.top.y+e.bottom.y+1)/2;if(o.get(Math.floor(r),Math.floor(t)))return{x:r,y:t,score:z({x:Math.floor(r),y:Math.floor(t)},[1,1,1],o)+L({x:r,y:t},B)}})).filter((o=>!!o)).sort(((o,e)=>o.score-e.score));return{alignmentPattern:a>=15&&k.length?k[0]:B,dimension:c}}function O(o){const e=function(o){const e=[];let r=[];const t=[];let s=[];for(let c=0;c<=o.height;c++){let n=0,d=!1,l=[0,0,0,0,0];for(let e=-1;e<=o.width;e++){const t=o.get(e,c);if(t===d)n++;else{l=[l[1],l[2],l[3],l[4],n],n=1,d=t;const o=I(l)/7,a=Math.abs(l[0]-o)<o&&Math.abs(l[1]-o)<o&&Math.abs(l[2]-3*o)<3*o&&Math.abs(l[3]-o)<o&&Math.abs(l[4]-o)<o&&!t,i=I(l.slice(-3))/3,B=Math.abs(l[2]-i)<i&&Math.abs(l[3]-i)<i&&Math.abs(l[4]-i)<i&&t;if(a){const o=e-l[3]-l[4],t=o-l[2],s={startX:t,endX:o,y:c},n=r.filter((e=>t>=e.bottom.startX&&t<=e.bottom.endX||o>=e.bottom.startX&&t<=e.bottom.endX||t<=e.bottom.startX&&o>=e.bottom.endX&&l[2]/(e.bottom.endX-e.bottom.startX)<1.5&&l[2]/(e.bottom.endX-e.bottom.startX)>.5));n.length>0?n[0].bottom=s:r.push({top:s,bottom:s})}if(B){const o=e-l[4],r=o-l[3],t={startX:r,y:c,endX:o},n=s.filter((e=>r>=e.bottom.startX&&r<=e.bottom.endX||o>=e.bottom.startX&&r<=e.bottom.endX||r<=e.bottom.startX&&o>=e.bottom.endX&&l[2]/(e.bottom.endX-e.bottom.startX)<1.5&&l[2]/(e.bottom.endX-e.bottom.startX)>.5));n.length>0?n[0].bottom=t:s.push({top:t,bottom:t})}}}e.push(...r.filter((o=>o.bottom.y!==c&&o.bottom.y-o.top.y>=2))),r=r.filter((o=>o.bottom.y===c)),t.push(...s.filter((o=>o.bottom.y!==c))),s=s.filter((o=>o.bottom.y===c))}e.push(...r.filter((o=>o.bottom.y-o.top.y>=2))),t.push(...s);const c=[];for(const r of e){if(r.bottom.y-r.top.y<2)continue;const e=(r.top.startX+r.top.endX+r.bottom.startX+r.bottom.endX)/4,t=(r.top.y+r.bottom.y+1)/2;if(!o.get(Math.round(e),Math.round(t)))continue;const s=[r.top.endX-r.top.startX,r.bottom.endX-r.bottom.startX,r.bottom.y-r.top.y+1],n=I(s)/s.length,d=z({x:Math.round(e),y:Math.round(t)},[1,1,3,1,1],o);c.push({score:d,x:e,y:t,size:n})}if(c.length<3)return null;c.sort(((o,e)=>o.score-e.score));const n=[];for(let o=0;o<Math.min(c.length,5);++o){const e=c[o],r=[];for(const o of c)o!==e&&r.push(Object.assign(Object.assign({},o),{score:o.score+Math.pow(o.size-e.size,2)/e.size}));r.sort(((o,e)=>o.score-e.score)),n.push({points:[e,r[0],r[1]],score:e.score+r[0].score+r[1].score})}n.sort(((o,e)=>o.score-e.score));const d=n[0],{topRight:l,topLeft:a,bottomLeft:i}=function(o,e,r){const t=L(o,e),s=L(e,r),c=L(o,r);let n,d,l;return[n,d,l]=s>=t&&s>=c?[e,o,r]:c>=s&&c>=t?[o,e,r]:[o,r,e],(l.x-d.x)*(n.y-d.y)-(l.y-d.y)*(n.x-d.x)<0&&([n,l]=[l,n]),{bottomLeft:n,topLeft:d,topRight:l}}(...d.points),B=X(o,t,l,a,i),k=[];B&&k.push({alignmentPattern:{x:B.alignmentPattern.x,y:B.alignmentPattern.y},bottomLeft:{x:i.x,y:i.y},dimension:B.dimension,topLeft:{x:a.x,y:a.y},topRight:{x:l.x,y:l.y}});const u=R(o,l),m=R(o,a),C=R(o,i),w=X(o,t,u,m,C);return w&&k.push({alignmentPattern:{x:w.alignmentPattern.x,y:w.alignmentPattern.y},bottomLeft:{x:C.x,y:C.y},topLeft:{x:m.x,y:m.y},topRight:{x:u.x,y:u.y},dimension:w.dimension}),0===k.length?null:k}(o);if(!e)return null;for(const r of e){const e=M(o,r),t=v(e.matrix);if(t)return{binaryData:t.bytes,data:t.text,chunks:t.chunks,version:t.version,location:{topRightCorner:e.mappingFunction(r.dimension,0),topLeftCorner:e.mappingFunction(0,0),bottomRightCorner:e.mappingFunction(r.dimension,r.dimension),bottomLeftCorner:e.mappingFunction(0,r.dimension),topRightFinderPattern:r.topRight,topLeftFinderPattern:r.topLeft,bottomLeftFinderPattern:r.bottomLeft,bottomRightAlignmentPattern:r.alignmentPattern},matrix:e.matrix}}return null}const E={inversionAttempts:"attemptBoth",greyScaleWeights:{red:.2126,green:.7152,blue:.0722,useIntegerApproximation:!1},canOverwriteImage:!0};function D(o,e){Object.keys(e).forEach((r=>{o[r]=e[r]}))}function T(o,e,r,n={}){const d=Object.create(null);D(d,E),D(d,n);const l="onlyInvert"===d.inversionAttempts||"invertFirst"===d.inversionAttempts,a="attemptBoth"===d.inversionAttempts||l,{binarized:i,inverted:B}=function(o,e,r,n,d,l){const a=e*r;if(o.length!==4*a)throw new Error("Malformed data passed to binarizer.");let i,B=0;l&&(i=new Uint8ClampedArray(o.buffer,B,a),B+=a);const k=new c(e,r,i);if(d.useIntegerApproximation)for(let t=0;t<r;t++)for(let r=0;r<e;r++){const s=4*(t*e+r),c=o[s],n=o[s+1],l=o[s+2];k.set(r,t,d.red*c+d.green*n+d.blue*l+128>>8)}else for(let t=0;t<r;t++)for(let r=0;r<e;r++){const s=4*(t*e+r),c=o[s],n=o[s+1],l=o[s+2];k.set(r,t,d.red*c+d.green*n+d.blue*l)}const u=Math.ceil(e/8),m=Math.ceil(r/8),C=u*m;let w;l&&(w=new Uint8ClampedArray(o.buffer,B,C),B+=C);const f=new c(u,m,w);for(let o=0;o<m;o++)for(let e=0;e<u;e++){let r=1/0,t=0;for(let s=0;s<8;s++)for(let c=0;c<8;c++){const n=k.get(8*e+c,8*o+s);r=Math.min(r,n),t=Math.max(t,n)}let s=(r+t)/2;const c=1.11;if(s=Math.min(255,s*c),t-r<=24&&(s=r/2,o>0&&e>0)){const t=(f.get(e,o-1)+2*f.get(e-1,o)+f.get(e-1,o-1))/4;r<t&&(s=t)}f.set(e,o,s)}let P;if(l){const r=new Uint8ClampedArray(o.buffer,B,a);B+=a,P=new t(r,e)}else P=t.createEmpty(e,r);let h=null;if(n)if(l){const r=new Uint8ClampedArray(o.buffer,B,a);h=new t(r,e)}else h=t.createEmpty(e,r);for(let o=0;o<m;o++)for(let e=0;e<u;e++){const r=s(e,2,u-3),t=s(o,2,m-3);let c=0;for(let o=-2;o<=2;o++)for(let e=-2;e<=2;e++)c+=f.get(r+o,t+e);const d=c/25;for(let r=0;r<8;r++)for(let t=0;t<8;t++){const s=8*e+r,c=8*o+t,l=k.get(s,c);P.set(s,c,l<=d),n&&h.set(s,c,!(l<=d))}}return n?{binarized:P,inverted:h}:{binarized:P}}(o,e,r,a,d.greyScaleWeights,d.canOverwriteImage);let k=O(l?B:i);return k||"attemptBoth"!==d.inversionAttempts&&"invertFirst"!==d.inversionAttempts||(k=O(l?i:B)),k}T.default=T},593:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.testQrCode=e.canvasImageSourceToImageData=e.blobToImageData=void 0,e.blobToImageData=function(o){const e=URL.createObjectURL(o),r=new Image;return new Promise(((o,t)=>{r.onload=()=>o(),r.onerror=o=>t(o),r.src=e})).then((()=>{URL.revokeObjectURL(e);const o=document.createElement("canvas");o.width=r.width,o.height=r.height;const t=o.getContext("2d");return t.drawImage(r,0,0),t.getImageData(0,0,o.width,o.height)}))},e.canvasImageSourceToImageData=function(o){const e=document.createElement("canvas");o instanceof HTMLVideoElement?(e.width=o.videoWidth,e.height=o.videoHeight):o instanceof SVGImageElement?(e.width=o.width.baseVal.value,e.height=o.height.baseVal.value):(e.width=o.width,e.height=o.height);const r=e.getContext("2d");return r.drawImage(o,0,0),r.getImageData(0,0,e.width,e.height)},e.testQrCode=function(){const o="0000000000000000000000001111111001101011111110010000010100010100000100101110100011001011101001011101001111010111010010111010110010101110100100000100010101000001001111111010101011111110000000000000110000000000101010100111000010010001001000111100010010000011010011111010001101000010011011100001001010000000101000101010101100000000000111101010100000111111100101011100100001000001000111101110000010111010110101110010100101110100000001000110001011101011101000100010010000010001000100011100111111101000101010101000000000000000000000000",e=new Uint8ClampedArray(2116);for(let r=0;r<o.length;r++){const t="1"===o[r]?0:255;e[4*r+0]=t,e[4*r+1]=t,e[4*r+2]=t,e[4*r+3]=255}return new ImageData(e,23,23)}}},e={};function r(t){var s=e[t];if(void 0!==s)return s.exports;var c=e[t]={exports:{}};return o[t](c,c.exports,r),c.exports}r.d=(o,e)=>{for(var t in e)r.o(e,t)&&!r.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:e[t]})},r.o=(o,e)=>Object.prototype.hasOwnProperty.call(o,e),r.r=o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var t={};(()=>{var o=t;const e=r(122),s=r(593);o.default=class{constructor(o){this._nativeDetectorSupported=void 0,self.BarcodeDetector&&(this.barcodeDetector=new self.BarcodeDetector(o))}async detect(o){if(this.nativeDetectorSupported())return this.barcodeDetector.detect(o);if(o instanceof ImageData||(o=o instanceof Blob?await(0,s.blobToImageData)(o):(0,s.canvasImageSourceToImageData)(o)),!(o instanceof ImageData))throw Error("The image is not provided in a supported format.");const r=(0,e.default)(o.data,o.width,o.height);if(!r||""===r.data)return[];const t=Math.min(r.location.topLeftCorner.x,r.location.topRightCorner.x,r.location.bottomRightCorner.x,r.location.bottomLeftCorner.x),c=Math.min(r.location.topLeftCorner.y,r.location.topRightCorner.y,r.location.bottomRightCorner.y,r.location.bottomLeftCorner.y),n=Math.max(r.location.topLeftCorner.x,r.location.topRightCorner.x,r.location.bottomRightCorner.x,r.location.bottomLeftCorner.x),d=Math.max(r.location.topLeftCorner.y,r.location.topRightCorner.y,r.location.bottomRightCorner.y,r.location.bottomLeftCorner.y);return[{format:"qr_code",rawValue:r.data,boundingBox:new DOMRectReadOnly(t,c,n-t,d-c),cornerPoints:[r.location.topLeftCorner,r.location.topRightCorner,r.location.bottomRightCorner,r.location.bottomLeftCorner]}]}static async getSupportedFormats(){return["qr_code"]}async nativeDetectorSupported(){if(void 0===this._nativeDetectorSupported){if(self.BarcodeDetector&&(await self.BarcodeDetector.getSupportedFormats()).includes("qr_code")){const o=await this.barcodeDetector.detect((0,s.testQrCode)());if(1===o.length&&"ABC"===o[0].rawValue)return this._nativeDetectorSupported=!0,!0}this._nativeDetectorSupported=!1}return this._nativeDetectorSupported}}})(),self.QrDetector=t.default})();
//# sourceMappingURL=QrDetector.min.js.map